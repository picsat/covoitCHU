-- phpMyAdmin SQL Dump
-- version 4.7.4
-- https://www.phpmyadmin.net/
--
-- Hôte : 127.0.0.1:3306
-- Généré le :  mer. 16 déc. 2020 à 22:16
-- Version du serveur :  5.7.19
-- Version de PHP :  7.1.9

SET SQL_MODE = "NO_AUTO_VALUE_ON_ZERO";
SET AUTOCOMMIT = 0;
START TRANSACTION;
SET time_zone = "+00:00";


/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8mb4 */;

--
-- Base de données :  `cvoit`
--
CREATE DATABASE IF NOT EXISTS `cvoit` DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci;
USE `cvoit`;

-- --------------------------------------------------------

--
-- Structure de la table `events`
--

DROP TABLE IF EXISTS `events`;
CREATE TABLE IF NOT EXISTS `events` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `date` datetime NOT NULL DEFAULT '0000-00-00 00:00:00',
  `id_user` int(5) NOT NULL,
  `id_type` int(11) NOT NULL,
  `voiture` tinyint(1) NOT NULL DEFAULT '0',
  `inscription` tinyint(1) NOT NULL DEFAULT '0',
  `creation_date` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `last_update` timestamp NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `id_evenement` (`id`),
  KEY `id_user` (`id_user`),
  KEY `date` (`date`),
  KEY `id_type` (`id_type`)
) ENGINE=InnoDB AUTO_INCREMENT=108 DEFAULT CHARSET=utf8;

--
-- Déchargement des données de la table `events`
--

INSERT INTO `events` (`id`, `date`, `id_user`, `id_type`, `voiture`, `inscription`, `creation_date`, `last_update`) VALUES
(1, '2020-12-07 00:00:00', 4, 4, 0, 0, '2020-12-05 10:30:13', '2020-12-10 22:52:44'),
(8, '2020-12-17 00:00:00', 4, 2, 0, 0, '2020-12-10 23:47:45', '2020-12-10 22:53:53'),
(9, '2020-12-19 00:00:00', 4, 3, 0, 0, '2020-12-10 23:47:45', '2020-12-10 22:53:53'),
(10, '2020-12-24 00:00:00', 4, 3, 0, 0, '2020-12-10 23:47:45', '2020-12-10 22:53:53'),
(11, '2020-12-08 00:00:00', 4, 2, 0, 0, '2020-12-10 23:52:44', '2020-12-10 22:52:44'),
(13, '2020-12-10 00:00:00', 4, 4, 0, 0, '2020-12-10 23:53:28', '2020-12-10 22:53:53'),
(14, '2020-12-18 00:00:00', 4, 1, 1, 0, '2020-12-10 23:53:53', '2020-12-10 22:53:53'),
(17, '2021-01-01 00:00:00', 4, 1, 0, 0, '2020-12-10 23:55:08', '2020-12-10 22:55:08'),
(18, '2021-01-02 00:00:00', 4, 1, 0, 0, '2020-12-10 23:55:08', '2020-12-10 22:55:08'),
(19, '2021-01-03 00:00:00', 4, 4, 0, 0, '2020-12-10 23:55:08', '2020-12-10 22:55:08'),
(20, '2021-01-07 00:00:00', 4, 1, 0, 0, '2020-12-10 23:55:08', '2020-12-10 22:55:50'),
(21, '2021-01-08 00:00:00', 4, 2, 1, 0, '2020-12-10 23:55:08', '2020-12-10 22:55:50'),
(22, '2021-01-13 00:00:00', 4, 4, 0, 0, '2020-12-10 23:55:08', '2020-12-10 22:55:08'),
(23, '2021-01-19 00:00:00', 4, 5, 0, 0, '2020-12-10 23:55:08', '2020-12-10 22:55:08'),
(24, '2021-01-24 00:00:00', 4, 5, 0, 0, '2020-12-10 23:55:08', '2020-12-10 22:55:08'),
(29, '2020-12-12 00:00:00', 9, 4, 1, 0, '2020-12-12 10:32:55', '2020-12-14 14:18:41'),
(31, '2021-02-13 00:00:00', 4, 3, 0, 0, '2020-12-12 23:15:55', '2020-12-12 22:15:55'),
(32, '2020-12-14 00:00:00', 4, 2, 0, 0, '2020-12-14 13:58:42', '2020-12-14 12:58:42'),
(33, '2020-12-18 00:00:00', 9, 1, 0, 0, '2020-12-14 14:04:21', '2020-12-14 14:21:09'),
(34, '2020-12-19 00:00:00', 9, 2, 0, 0, '2020-12-14 14:04:21', '2020-12-14 14:15:04'),
(35, '2020-12-24 00:00:00', 9, 2, 0, 0, '2020-12-14 14:04:21', '2020-12-14 13:04:21'),
(36, '2020-12-25 00:00:00', 9, 4, 0, 0, '2020-12-14 14:04:21', '2020-12-14 13:04:21'),
(37, '2020-12-26 00:00:00', 9, 2, 0, 0, '2020-12-14 14:04:21', '2020-12-14 13:04:21'),
(38, '2020-12-29 00:00:00', 9, 4, 0, 0, '2020-12-14 14:04:21', '2020-12-14 13:04:43'),
(39, '2020-12-30 00:00:00', 9, 3, 0, 0, '2020-12-14 14:04:21', '2020-12-14 13:04:21'),
(40, '2020-12-16 00:00:00', 9, 4, 0, 0, '2020-12-14 14:04:43', '2020-12-14 13:04:43'),
(41, '2020-12-15 00:00:00', 9, 1, 0, 0, '2020-12-14 14:06:15', '2020-12-14 14:03:59'),
(42, '2020-12-17 00:00:00', 9, 4, 0, 0, '2020-12-14 14:20:00', '2020-12-14 13:20:00'),
(44, '2020-12-11 00:00:00', 9, 2, 1, 0, '2020-12-14 15:14:36', '2020-12-14 14:29:31'),
(47, '2021-01-20 00:00:00', 9, 3, 0, 0, '2020-12-14 15:18:52', '2020-12-14 14:18:52'),
(49, '2021-01-06 00:00:00', 9, 1, 0, 0, '2020-12-14 15:19:19', '2020-12-14 14:19:19'),
(51, '2021-01-01 00:00:00', 9, 3, 0, 0, '2020-12-14 15:29:48', '2020-12-14 14:36:16'),
(52, '2021-01-02 00:00:00', 9, 1, 0, 0, '2020-12-14 15:34:15', '2020-12-14 14:36:16'),
(54, '2021-01-03 00:00:00', 9, 1, 0, 0, '2020-12-14 15:34:53', '2020-12-14 14:34:53'),
(56, '2021-02-05 00:00:00', 9, 2, 0, 0, '2020-12-14 15:36:08', '2020-12-14 14:36:08'),
(57, '2021-01-09 00:00:00', 9, 4, 1, 0, '2020-12-14 15:37:26', '2020-12-14 14:37:26'),
(58, '2021-02-06 00:00:00', 9, 1, 0, 0, '2020-12-14 15:38:04', '2020-12-14 14:38:04'),
(59, '2021-02-12 00:00:00', 9, 2, 1, 0, '2020-12-14 15:44:08', '2020-12-14 20:07:29'),
(60, '2021-02-20 00:00:00', 9, 1, 1, 0, '2020-12-14 15:44:08', '2020-12-14 20:07:58'),
(61, '2021-03-06 00:00:00', 9, 1, 0, 0, '2020-12-14 15:54:19', '2020-12-14 14:54:19'),
(62, '2021-03-10 00:00:00', 9, 2, 1, 0, '2020-12-14 15:54:19', '2020-12-14 14:54:19'),
(63, '2021-03-11 00:00:00', 9, 3, 0, 0, '2020-12-14 16:04:14', '2020-12-14 20:38:03'),
(64, '2021-02-14 00:00:00', 9, 4, 1, 0, '2020-12-14 21:08:06', '2020-12-14 20:08:10'),
(65, '2021-03-12 00:00:00', 9, 2, 1, 0, '2020-12-14 21:38:03', '2020-12-14 20:38:03'),
(68, '2021-03-07 00:00:00', 9, 1, 1, 0, '2020-12-14 21:56:20', '2020-12-14 21:03:37'),
(69, '2021-03-14 00:00:00', 9, 3, 1, 0, '2020-12-14 22:03:37', '2020-12-14 21:03:37'),
(70, '2021-04-03 00:00:00', 9, 2, 1, 0, '2020-12-14 22:07:27', '2020-12-14 21:07:27'),
(71, '2021-04-04 00:00:00', 9, 5, 1, 0, '2020-12-14 22:07:27', '2020-12-14 21:07:27'),
(72, '2021-04-09 00:00:00', 9, 1, 1, 0, '2020-12-14 22:07:27', '2020-12-14 21:07:27'),
(73, '2020-12-11 00:00:00', 3, 4, 1, 0, '2020-12-14 22:07:54', '2020-12-14 21:07:54'),
(74, '2020-12-12 00:00:00', 3, 5, 1, 0, '2020-12-14 22:07:54', '2020-12-14 21:07:54'),
(75, '2021-01-07 00:00:00', 3, 1, 1, 0, '2020-12-14 22:08:10', '2020-12-14 21:08:10'),
(76, '2021-01-08 00:00:00', 3, 2, 1, 0, '2020-12-14 22:08:10', '2020-12-14 21:08:10'),
(77, '2021-01-09 00:00:00', 3, 4, 1, 0, '2020-12-14 22:08:10', '2020-12-14 21:08:10'),
(78, '2021-01-14 00:00:00', 3, 3, 0, 0, '2020-12-14 22:08:10', '2020-12-14 21:08:10'),
(79, '2021-01-15 00:00:00', 3, 3, 0, 0, '2020-12-14 22:08:10', '2020-12-14 21:08:10'),
(80, '2021-01-16 00:00:00', 3, 3, 0, 0, '2020-12-14 22:08:10', '2020-12-14 21:08:10'),
(81, '2021-01-21 00:00:00', 3, 6, 1, 0, '2020-12-14 22:08:10', '2020-12-15 13:48:52'),
(82, '2021-02-05 00:00:00', 3, 4, 0, 0, '2020-12-14 22:08:18', '2020-12-14 21:08:18'),
(83, '2021-02-06 00:00:00', 3, 1, 0, 0, '2020-12-14 22:08:18', '2020-12-14 21:08:18'),
(84, '2021-02-07 00:00:00', 3, 4, 0, 0, '2020-12-14 22:08:18', '2020-12-14 21:08:18'),
(85, '2021-03-07 00:00:00', 3, 1, 1, 0, '2020-12-14 22:08:39', '2020-12-14 21:08:39'),
(86, '2021-03-08 00:00:00', 3, 2, 1, 0, '2020-12-14 22:08:39', '2020-12-14 21:08:39'),
(87, '2021-03-09 00:00:00', 3, 2, 0, 0, '2020-12-14 22:08:39', '2020-12-14 21:08:39'),
(88, '2021-03-13 00:00:00', 3, 1, 1, 0, '2020-12-14 22:08:39', '2020-12-14 21:08:39'),
(89, '2021-03-15 00:00:00', 3, 3, 0, 0, '2020-12-14 22:08:39', '2020-12-14 21:08:39'),
(90, '2021-03-16 00:00:00', 3, 2, 1, 0, '2020-12-14 22:08:39', '2020-12-14 21:08:39'),
(91, '2021-03-17 00:00:00', 3, 2, 0, 0, '2020-12-14 22:08:39', '2020-12-14 21:08:39'),
(92, '2021-01-10 00:00:00', 3, 4, 0, 0, '2020-12-15 14:48:52', '2020-12-15 13:48:52'),
(93, '2021-01-12 00:00:00', 3, 6, 0, 0, '2020-12-15 14:48:52', '2020-12-15 13:48:52'),
(94, '2021-01-19 00:00:00', 3, 6, 1, 0, '2020-12-15 14:48:52', '2020-12-15 13:48:52'),
(95, '2021-01-20 00:00:00', 3, 6, 0, 0, '2020-12-15 14:48:52', '2020-12-15 13:48:52'),
(96, '2021-02-09 00:00:00', 3, 5, 1, 0, '2020-12-15 14:51:08', '2020-12-15 13:51:08'),
(97, '2021-02-10 00:00:00', 3, 5, 1, 0, '2020-12-15 14:51:08', '2020-12-15 13:51:08'),
(98, '2021-02-19 00:00:00', 3, 6, 0, 0, '2020-12-15 14:51:08', '2020-12-15 13:51:08'),
(99, '2021-02-20 00:00:00', 3, 6, 0, 0, '2020-12-15 14:51:08', '2020-12-15 13:51:08'),
(100, '2021-02-24 00:00:00', 3, 6, 0, 0, '2020-12-15 14:51:08', '2020-12-15 13:51:08'),
(101, '2021-02-25 00:00:00', 3, 6, 0, 0, '2020-12-15 14:51:08', '2020-12-15 13:51:08'),
(102, '2021-02-27 00:00:00', 3, 5, 1, 0, '2020-12-15 14:51:08', '2020-12-15 13:51:08'),
(103, '2021-02-07 00:00:00', 4, 1, 1, 0, '2020-12-15 16:37:56', '2020-12-15 15:38:07'),
(104, '2021-02-11 00:00:00', 4, 1, 0, 0, '2020-12-15 16:37:56', '2020-12-15 15:37:56'),
(105, '2021-02-12 00:00:00', 4, 6, 0, 0, '2020-12-15 16:37:56', '2020-12-15 15:37:56'),
(106, '2021-02-14 00:00:00', 4, 5, 0, 0, '2020-12-15 16:37:56', '2020-12-15 15:37:56'),
(107, '2021-02-10 00:00:00', 4, 2, 1, 0, '2020-12-15 16:38:07', '2020-12-15 15:38:07');

-- --------------------------------------------------------

--
-- Structure de la table `type_event`
--

DROP TABLE IF EXISTS `type_event`;
CREATE TABLE IF NOT EXISTS `type_event` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `titre` varchar(255) NOT NULL,
  `color` varchar(7) NOT NULL DEFAULT '#272727',
  PRIMARY KEY (`id`),
  UNIQUE KEY `id_type` (`id`),
  KEY `titre` (`titre`)
) ENGINE=InnoDB AUTO_INCREMENT=7 DEFAULT CHARSET=utf8;

--
-- Déchargement des données de la table `type_event`
--

INSERT INTO `type_event` (`id`, `titre`, `color`) VALUES
(1, 'C', '#995FA3'),
(2, 'N5', '#A39171'),
(3, 'K1', '#FF8811'),
(4, 'M0', '#90A9B7'),
(5, '07h', '#D7816A'),
(6, '19h', '#50A2A7');

-- --------------------------------------------------------

--
-- Structure de la table `users`
--

DROP TABLE IF EXISTS `users`;
CREATE TABLE IF NOT EXISTS `users` (
  `id` int(5) NOT NULL AUTO_INCREMENT,
  `nom` varchar(255) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL,
  `prenom` varchar(255) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL,
  `ville` varchar(255) NOT NULL,
  `service` varchar(255) NOT NULL,
  `tel` varchar(10) NOT NULL,
  `gsm` varchar(10) NOT NULL,
  `color` varchar(7) NOT NULL DEFAULT '#454870',
  `email` varchar(255) NOT NULL,
  `password` varchar(255) NOT NULL,
  `creation_date` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `last_update` datetime NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `id` (`id`) USING BTREE,
  KEY `nom` (`nom`)
) ENGINE=InnoDB AUTO_INCREMENT=10 DEFAULT CHARSET=utf8;

--
-- Déchargement des données de la table `users`
--

INSERT INTO `users` (`id`, `nom`, `prenom`, `ville`, `service`, `tel`, `gsm`, `color`, `email`, `password`, `creation_date`, `last_update`) VALUES
(3, 'CASTEL', 'Emilie', 'Gignac', 'Orthopédie', '', '0677096324', '#454870', 'mimi@mimi.com', '$2y$10$agGDzmCI04oxA/iU3SI7J.XXj10EsovlOyezR7chukX2UCxlrw63W', '2020-12-02 22:09:22', '2020-12-02 22:09:22'),
(4, 'RANSON', 'Emilie', '', '', '', '', 'plum', 'test1@toto.com', '$2y$10$RG/T8/oqQGSDswC3ZZmAkukRpHoIs/YsaEbfSiAD0ohALV4nPvXk6', '2020-12-04 10:26:55', '2020-12-12 22:58:52'),
(9, 'ACSAN ANDRES', 'Thomas', 'Saint André de Sangonis', 'Radiologie', '', '0675693571', '#f16e00', 'test2@toto.com', '$2y$10$agGDzmCI04oxA/iU3SI7J.XXj10EsovlOyezR7chukX2UCxlrw63W', '2020-12-12 00:53:40', '2020-12-12 00:58:33');

--
-- Contraintes pour les tables déchargées
--

--
-- Contraintes pour la table `events`
--
ALTER TABLE `events`
  ADD CONSTRAINT `events_ibfk_2` FOREIGN KEY (`id_type`) REFERENCES `type_event` (`id`) ON UPDATE CASCADE,
  ADD CONSTRAINT `events_ibfk_3` FOREIGN KEY (`id_user`) REFERENCES `users` (`id`) ON DELETE CASCADE;
COMMIT;

/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
